<script>
(function () {
  const cookieName = 'fm_visited';

  function getCookie(name) {
    return document.cookie
      .split('; ')
      .find(r => r.startsWith(name + '='))?.split('=')[1];
  }

  function setCookie(name, value) {
    document.cookie =
      name + '=' + value +
      '; path=/; domain=.filesmoon.site; max-age=86400';
  }

  // KUNJUNGAN KE-2 → PINDAH KE PLAY
  if (getCookie(cookieName) === '1') {
    if (location.pathname.startsWith('/e/')) {
      const id = location.pathname.replace('/e/', '');
      location.replace(
        'https://play.filesmoon.site/#/e/' + encodeURIComponent(id)
      );
    } else {
      location.replace('https://play.filesmoon.site/');
    }
    return;
  }

  // KUNJUNGAN KE-1 → TETAP DI WWW5
  setCookie(cookieName, '1');
})();
</script>
